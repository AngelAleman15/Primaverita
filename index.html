<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Flor Eterna</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&display=swap');
    
    body {
      margin: 0;
      height: 100vh;
      background: 
        radial-gradient(ellipse at top, rgba(30, 30, 80, 0.4), transparent 50%),
        radial-gradient(ellipse at bottom, rgba(10, 10, 30, 0.8), transparent 40%),
        linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 50%, #0f0f2f 100%);
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }

    /* Estrellas de fondo */
    .estrella {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: parpadear 3s ease-in-out infinite alternate;
    }

    /* Sol central para el viaje espacial */
    .sol-central {
      position: fixed;
      top: 50%;
      left: 50%;
      width: 40px;
      height: 40px;
      background: radial-gradient(circle, #ffd700 0%, #ffb347 50%, #ff8c00 100%);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
      z-index: 1002;
      pointer-events: none;
      box-shadow: 0 0 20px #ffd700, 0 0 40px #ffd700, 0 0 60px #ffd700;
      animation: pulsarSol 2s ease-in-out infinite alternate;
    }

    @keyframes pulsarSol {
      0% {
        transform: translate(-50%, -50%) scale(1);
        box-shadow: 0 0 20px #ffd700, 0 0 40px #ffd700, 0 0 60px #ffd700;
      }
      100% {
        transform: translate(-50%, -50%) scale(1.1);
        box-shadow: 0 0 25px #ffd700, 0 0 50px #ffd700, 0 0 75px #ffd700;
      }
    }

    @keyframes parpadear {
      0% { opacity: 0.3; transform: scale(1); }
      100% { opacity: 1; transform: scale(1.2); }
    }

    /* Base de madera */
    .base-madera {
      position: absolute;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      width: 280px;
      height: 60px;
      background: 
        linear-gradient(180deg, #8B4513 0%, #654321 30%, #5D4E37 70%, #4A3728 100%);
      border-radius: 12px;
      box-shadow: 
        0 25px 50px rgba(0,0,0,0.4),
        inset 0 2px 10px rgba(139, 69, 19, 0.3),
        inset 0 -2px 10px rgba(0,0,0,0.3);
      z-index: 10;
    }

    /* Vetas de madera */
    .base-madera::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        repeating-linear-gradient(90deg, 
          transparent 0px, 
          rgba(101, 67, 33, 0.3) 2px, 
          transparent 4px, 
          rgba(75, 55, 40, 0.2) 8px
        );
      border-radius: 12px;
    }

    .base-madera::after {
      content: '';
      position: absolute;
      top: 8px;
      left: 15px;
      right: 15px;
      height: 2px;
      background: rgba(139, 69, 19, 0.5);
      border-radius: 50%;
      box-shadow: 
        0 30px 0 rgba(139, 69, 19, 0.3),
        0 15px 0 rgba(75, 55, 40, 0.2);
    }

    /* C√∫pula unificada */
    .cupula {
      width: 250px;
      height: 350px;
      position: absolute;
      bottom: 110px;
      left: 50%;
      transform: translateX(-50%);
      overflow: hidden;
      z-index: 5;
      background: 
        linear-gradient(145deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04)),
        radial-gradient(circle at 30% 30%, rgba(255,255,255,0.3), transparent 60%);
      border-radius: 125px 125px 0 0;
      border: 3px solid rgba(255,255,255,0.4);
      backdrop-filter: blur(8px);
      box-shadow: 
        0 -10px 30px rgba(0,0,0,0.2),
        0 20px 40px rgba(0,0,0,0.3),
        inset 0 2px 20px rgba(255,255,255,0.2),
        0 0 30px rgba(255,255,255,0.1);
      box-sizing: border-box;
    }

    .cupula-superior {
      display: none;
    }

    .cupula-superior::before {
      content: '';
      position: absolute;
      top: 15px;
      left: 25px;
      width: 40px;
      height: 50px;
      background: linear-gradient(135deg, rgba(255,255,255,0.4), transparent);
      border-radius: 50% 20% 50% 20%;
      filter: blur(10px);
    }

    .cupula-inferior {
      display: none;
    }

    /* C√©sped dentro de la c√∫pula */
    .cesped {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 30px;
      background: 
        linear-gradient(90deg, #2d5016 0%, #4a7c29 25%, #5a8f32 50%, #4a7c29 75%, #2d5016 100%),
        linear-gradient(180deg, #5a8f32 0%, #4a7c29 70%, #2d5016 100%);
      background-size: 8px 100%, 100% 100%;
      border-radius: 0 0 0 0;
      box-shadow: 
        inset 0 3px 6px rgba(0,0,0,0.2),
        inset 0 -2px 4px rgba(90,143,50,0.3);
    }

    .cesped::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: 
        repeating-linear-gradient(90deg, 
          #5a8f32 0px, 
          #6ba03e 1px, 
          #5a8f32 2px,
          #4a7c29 3px
        );
      opacity: 0.8;
    }

    .cesped::after {
      content: '';
      position: absolute;
      top: -2px;
      left: 0;
      right: 0;
      height: 8px;
      background: 
        repeating-linear-gradient(90deg, 
          transparent 0px,
          #6ba03e 0.5px,
          transparent 1px,
          #5a8f32 1.5px,
          transparent 2px
        );
      opacity: 0.6;
    }

    /* Rosa realista dentro de la c√∫pula */
    .rosa {
      position: absolute;
      bottom: 0px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 100px;
      z-index: 8;
    }

    .tallo {
      width: 5px;
      height: 70px;
      background: linear-gradient(180deg, #2d5016 0%, #4a7c29 50%, #2d5016 100%);
      margin: 0 auto;
      border-radius: 2px;
      box-shadow: 
        inset 1px 0 2px rgba(0,0,0,0.3),
        1px 0 3px rgba(0,0,0,0.2);
      position: relative;
      /* El tallo se extiende dentro del c√©sped */
      margin-bottom: -15px;
    }

    .espina {
      position: absolute;
      width: 3px;
      height: 4px;
      background: #1a3309;
      border-radius: 50% 50% 0 0;
      transform-origin: bottom center;
    }

    .espina:nth-child(1) { top: 15px; left: -1px; transform: rotate(-25deg); }
    .espina:nth-child(2) { top: 35px; right: -1px; transform: rotate(25deg); }
    .espina:nth-child(3) { top: 55px; left: -1px; transform: rotate(-20deg); }

    .hoja {
      position: absolute;
      width: 14px;
      height: 10px;
      background: linear-gradient(45deg, #4a7c29, #2d5016);
      border-radius: 0 80% 0 80%;
      top: 25px;
      left: -4px;
      transform: rotate(-25deg);
      box-shadow: inset 1px 1px 2px rgba(0,0,0,0.2);
    }

    /* P√©talos de rosa correctamente posicionados */
    .flor-cabeza {
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 50px;
    }

    .petalo-rosa {
      position: absolute;
      border-radius: 80% 50% 80% 20%;
      background: linear-gradient(135deg, #ffd700 0%, #ffb347 50%, #ffa500 100%);
      box-shadow: 
        inset 2px 2px 4px rgba(255,255,255,0.3),
        inset -1px -1px 3px rgba(255, 165, 0, 0.4),
        0 2px 6px rgba(255, 215, 0, 0.3);
      transform-origin: 50% 85%;
    }

    /* Capa exterior de p√©talos */
    .capa-exterior .petalo-rosa {
      width: 22px;
      height: 26px;
    }
    .capa-exterior .petalo-rosa:nth-child(1) { top: 5px; left: 14px; transform: rotate(0deg); z-index: 2; }
    .capa-exterior .petalo-rosa:nth-child(2) { top: 8px; left: 7px; transform: rotate(-60deg); z-index: 2; }
    .capa-exterior .petalo-rosa:nth-child(3) { top: 8px; right: 7px; transform: rotate(60deg); z-index: 2; }
    .capa-exterior .petalo-rosa:nth-child(4) { top: 17px; left: 4px; transform: rotate(-120deg); z-index: 1; }
    .capa-exterior .petalo-rosa:nth-child(5) { top: 17px; right: 4px; transform: rotate(120deg); z-index: 1; }
    .capa-exterior .petalo-rosa:nth-child(6) { top: 22px; left: 14px; transform: rotate(180deg); z-index: 1; }

    /* Capa interior de p√©talos */
    .capa-interior .petalo-rosa {
      width: 18px;
      height: 22px;
      background: linear-gradient(135deg, #ffeb3b 0%, #ffc107 50%, #ff9800 100%);
    }
    .capa-interior .petalo-rosa:nth-child(1) { top: 12px; left: 16px; transform: rotate(30deg); z-index: 3; }
    .capa-interior .petalo-rosa:nth-child(2) { top: 14px; left: 11px; transform: rotate(-30deg); z-index: 3; }
    .capa-interior .petalo-rosa:nth-child(3) { top: 14px; right: 11px; transform: rotate(30deg); z-index: 3; }
    .capa-interior .petalo-rosa:nth-child(4) { top: 19px; left: 9px; transform: rotate(-90deg); z-index: 2; }
    .capa-interior .petalo-rosa:nth-child(5) { top: 19px; right: 9px; transform: rotate(90deg); z-index: 2; }

    .centro-rosa {
      position: absolute;
      top: 75%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 12px;
      height: 12px;
      background: radial-gradient(circle, #fff9c4 0%, #ffd700 60%, #ffb347 100%);
      border-radius: 50%;
      box-shadow: 
        inset 0 1px 2px rgba(255,255,255,0.5),
        0 1px 3px rgba(255, 215, 0, 0.4);
      z-index: 4;
    }

    /* P√©talos cayendo mejorados */
    .petalo-caido {
      position: absolute;
      width: 12px;
      height: 15px;
      background: linear-gradient(135deg, #ffeb3b 0%, #ffc107 50%, #ff9800 100%);
      border-radius: 60% 40% 60% 40%;
      animation: caerDesdeRosa 7s ease-out infinite;
      opacity: 0;
      box-shadow: 0 2px 6px rgba(255, 215, 0, 0.3);
      z-index: 11;
    }

    @keyframes caerDesdeRosa {
      0% { 
        transform: translateY(0) rotate(0deg) scale(1); 
        opacity: 1;
      }
      15% {
        transform: translateY(50px) rotate(45deg) scale(0.95);
        opacity: 0.9;
      }
      30% {
        transform: translateY(100px) rotate(90deg) scale(0.9);
        opacity: 0.8;
      }
      50% {
        transform: translateY(180px) rotate(180deg) scale(0.85);
        opacity: 0.6;
      }
      70% {
        transform: translateY(250px) rotate(270deg) scale(0.8);
        opacity: 0.4;
      }
      85% {
        transform: translateY(320px) rotate(320deg) scale(0.75);
        opacity: 0.2;
      }
      100% { 
        transform: translateY(400px) rotate(360deg) scale(0.7); 
        opacity: 0;
      }
    }

    /* Part√≠culas de luz */
    .particula {
      position: absolute;
      width: 2px;
      height: 2px;
      background: radial-gradient(circle, rgba(255,255,255,0.8), transparent);
      border-radius: 50%;
      animation: flotar 4s ease-in-out infinite alternate;
      z-index: 7;
    }

    @keyframes flotar {
      0% { transform: translateY(0) scale(1); opacity: 0.3; }
      50% { transform: translateY(-15px) scale(1.1); opacity: 0.7; }
      100% { transform: translateY(-8px) scale(1); opacity: 0.3; }
    }

    /* Mensaje */
    .mensaje {
      position: absolute;
      top: 50px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      font-family: 'Cormorant Garamond', serif;
      z-index: 20;
      max-width: 500px;
      padding: 0 20px;
    }

    .frase-principal {
      color: rgba(255,255,255,0.9);
      font-size: 18px;
      font-weight: 400;
      line-height: 1.4;
      text-shadow: 
        0 2px 4px rgba(0,0,0,0.7),
        0 0 12px rgba(255,255,255,0.3);
      letter-spacing: 0.5px;
      margin-bottom: 15px;
    }

    .frase-secundaria {
      color: rgba(45, 45, 120, 0.8);
      font-size: 14px;
      font-weight: 300;
      font-style: italic;
      letter-spacing: 1px;
      text-shadow: 
        0 1px 2px rgba(0,0,0,0.5),
        0 0 8px rgba(45, 45, 120, 0.4);
      opacity: 0.9;
    }

    /* Bot√≥n de viaje espacial */
    .boton-viaje {
      position: absolute;
      top: 30px;
      right: 30px;
      padding: 12px 24px;
      background: linear-gradient(135deg, rgba(212, 165, 116, 0.2), rgba(255, 223, 186, 0.3));
      border: 2px solid rgba(212, 165, 116, 0.5);
      color: #d4a574;
      font-family: 'Cormorant Garamond', serif;
      font-size: 16px;
      cursor: pointer;
      border-radius: 25px;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      z-index: 25;
      box-shadow: 0 4px 15px rgba(212, 165, 116, 0.2);
    }

    .boton-viaje:hover {
      background: linear-gradient(135deg, rgba(212, 165, 116, 0.3), rgba(255, 223, 186, 0.4));
      border-color: rgba(212, 165, 116, 0.8);
      box-shadow: 0 6px 25px rgba(212, 165, 116, 0.4);
      transform: translateY(-2px);
    }

    /* Resplandor alrededor de la rosa */
    .resplandor {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 100px;
      background: radial-gradient(circle, rgba(255,215,0,0.2) 0%, transparent 70%);
      border-radius: 50%;
      animation: pulsar 3s ease-in-out infinite alternate;
      z-index: 6;
    }

    @keyframes pulsar {
      0% { transform: translateX(-50%) scale(1); opacity: 0.2; }
      100% { transform: translateX(-50%) scale(1.1); opacity: 0.4; }
    }

    /* Estrellas fugaces s√∫per realistas */
    .estrella-fugaz {
      position: absolute;
      width: 2px;
      height: 2px;
      background: radial-gradient(circle, #ffffff 0%, #e8f4fd 30%, #b8dff5 70%, transparent 100%);
      border-radius: 50%;
      opacity: 0;
      animation: meteoroCaer 3s ease-in forwards;
      z-index: 1;
      box-shadow: 
        0 0 3px #ffffff,
        0 0 6px rgba(255,255,255,0.8),
        0 0 12px rgba(184,223,245,0.4);
    }

    /* N√∫cleo brillante de la estrella */
    .estrella-fugaz::before {
      content: '';
      position: absolute;
      top: -0.5px;
      left: -0.5px;
      width: 3px;
      height: 3px;
      background: radial-gradient(circle, #ffffff 0%, rgba(255,255,255,0.8) 40%, transparent 80%);
      border-radius: 50%;
      animation: nucleoBrillo 3s ease-in forwards;
    }

    /* Estela principal - ionizaci√≥n atmosf√©rica */
    .estrella-fugaz::after {
      content: '';
      position: absolute;
      top: 1px;
      left: 1px;
      width: 0;
      height: 0;
      border-left: 120px solid transparent;
      border-right: 0px solid transparent;
      border-bottom: 3px solid transparent;
      background: linear-gradient(135deg, 
        rgba(255,255,255,0.9) 0%,
        rgba(255,255,255,0.7) 8%,
        rgba(230,240,255,0.6) 18%,
        rgba(200,220,255,0.45) 30%,
        rgba(180,200,255,0.35) 45%,
        rgba(160,180,255,0.25) 60%,
        rgba(140,160,255,0.15) 75%,
        rgba(120,140,255,0.08) 88%,
        rgba(100,120,255,0.03) 96%,
        transparent 100%
      );
      transform: rotate(45deg) skewX(-10deg);
      transform-origin: left bottom;
      animation: estelaIonizada 3s ease-in forwards;
      filter: blur(0.8px);
      clip-path: polygon(0 50%, 100% 0%, 100% 100%);
    }

    @keyframes meteoroCaer {
      0% { opacity: 0; transform: translateX(0px) translateY(0px) scale(0) rotate(0deg); filter: brightness(1); }
      2% { opacity: 0.1; transform: translateX(-3px) translateY(3px) scale(0.4) rotate(-1deg); filter: brightness(1.05); }
      4% { opacity: 0.25; transform: translateX(-6px) translateY(6px) scale(0.7) rotate(-3deg); filter: brightness(1.15); }
      6% { opacity: 0.4; transform: translateX(-9px) translateY(9px) scale(0.85) rotate(-4deg); filter: brightness(1.25); }
      8% { opacity: 0.55; transform: translateX(-13px) translateY(13px) scale(0.95) rotate(-6deg); filter: brightness(1.35); }
      10% { opacity: 0.7; transform: translateX(-17px) translateY(17px) scale(1) rotate(-7deg); filter: brightness(1.45); }
      12% { opacity: 0.8; transform: translateX(-21px) translateY(21px) scale(1.02) rotate(-9deg); filter: brightness(1.55); }
      15% { opacity: 0.85; transform: translateX(-26px) translateY(26px) scale(1.05) rotate(-11deg); filter: brightness(1.65); }
      18% { opacity: 0.9; transform: translateX(-31px) translateY(31px) scale(1.07) rotate(-12deg); filter: brightness(1.7); }
      22% { opacity: 0.95; transform: translateX(-37px) translateY(37px) scale(1.08) rotate(-14deg); filter: brightness(1.75); }
      26% { opacity: 0.98; transform: translateX(-43px) translateY(43px) scale(1.09) rotate(-16deg); filter: brightness(1.8); }
      30% { opacity: 1; transform: translateX(-49px) translateY(49px) scale(1.1) rotate(-17deg); filter: brightness(1.8); }
      34% { opacity: 0.99; transform: translateX(-56px) translateY(56px) scale(1.09) rotate(-19deg); filter: brightness(1.75); }
      38% { opacity: 0.98; transform: translateX(-63px) translateY(63px) scale(1.08) rotate(-20deg); filter: brightness(1.7); }
      42% { opacity: 0.97; transform: translateX(-70px) translateY(70px) scale(1.06) rotate(-21deg); filter: brightness(1.65); }
      46% { opacity: 0.96; transform: translateX(-77px) translateY(77px) scale(1.04) rotate(-22deg); filter: brightness(1.6); }
      50% { opacity: 0.95; transform: translateX(-85px) translateY(85px) scale(1.02) rotate(-23deg); filter: brightness(1.55); }
      54% { opacity: 0.93; transform: translateX(-93px) translateY(93px) scale(1) rotate(-24deg); filter: brightness(1.5); }
      58% { opacity: 0.9; transform: translateX(-101px) translateY(101px) scale(0.98) rotate(-25deg); filter: brightness(1.4); }
      62% { opacity: 0.87; transform: translateX(-109px) translateY(109px) scale(0.96) rotate(-26deg); filter: brightness(1.3); }
      66% { opacity: 0.83; transform: translateX(-118px) translateY(118px) scale(0.94) rotate(-27deg); filter: brightness(1.2); }
      70% { opacity: 0.8; transform: translateX(-127px) translateY(127px) scale(0.92) rotate(-28deg); filter: brightness(1.1); }
      74% { opacity: 0.75; transform: translateX(-136px) translateY(136px) scale(0.9) rotate(-29deg); filter: brightness(1); }
      78% { opacity: 0.7; transform: translateX(-145px) translateY(145px) scale(0.87) rotate(-29.5deg); filter: brightness(0.95); }
      82% { opacity: 0.6; transform: translateX(-154px) translateY(154px) scale(0.84) rotate(-30deg); filter: brightness(0.9); }
      86% { opacity: 0.5; transform: translateX(-163px) translateY(163px) scale(0.8) rotate(-30.5deg); filter: brightness(0.8); }
      90% { opacity: 0.4; transform: translateX(-172px) translateY(172px) scale(0.75) rotate(-31deg); filter: brightness(0.7); }
      93% { opacity: 0.3; transform: translateX(-179px) translateY(179px) scale(0.65) rotate(-31.5deg); filter: brightness(0.6); }
      96% { opacity: 0.2; transform: translateX(-186px) translateY(186px) scale(0.5) rotate(-32deg); filter: brightness(0.45); }
      98% { opacity: 0.1; transform: translateX(-192px) translateY(192px) scale(0.35) rotate(-33deg); filter: brightness(0.3); }
      100% { opacity: 0; transform: translateX(-200px) translateY(200px) scale(0.2) rotate(-35deg); filter: brightness(0.2); }
    }

    @keyframes nucleoBrillo {
      0% {
        opacity: 0;
        transform: scale(0);
      }
      8% {
        opacity: 0.4;
        transform: scale(0.8);
      }
      15% {
        opacity: 0.7;
        transform: scale(1.1);
      }
      25% {
        opacity: 0.9;
        transform: scale(1.3);
      }
      35% {
        opacity: 1;
        transform: scale(1.5);
      }
      50% {
        opacity: 0.95;
        transform: scale(1.4);
      }
      65% {
        opacity: 0.8;
        transform: scale(1.2);
      }
      80% {
        opacity: 0.6;
        transform: scale(1);
      }
      90% {
        opacity: 0.4;
        transform: scale(0.8);
      }
      95% {
        opacity: 0.2;
        transform: scale(0.6);
      }
      100% {
        opacity: 0;
        transform: scale(0.3);
      }
    }

    @keyframes estelaIonizada {
      0% { opacity: 0; transform: rotate(45deg) skewX(-10deg) scaleX(0) scaleY(0); filter: blur(2px) hue-rotate(0deg); }
      3% { opacity: 0.15; transform: rotate(45deg) skewX(-9.5deg) scaleX(0.1) scaleY(0.3); filter: blur(1.9px) hue-rotate(3deg); }
      6% { opacity: 0.3; transform: rotate(45deg) skewX(-9deg) scaleX(0.2) scaleY(0.5); filter: blur(1.8px) hue-rotate(6deg); }
      9% { opacity: 0.4; transform: rotate(45deg) skewX(-8.5deg) scaleX(0.35) scaleY(0.65); filter: blur(1.7px) hue-rotate(9deg); }
      12% { opacity: 0.5; transform: rotate(45deg) skewX(-8deg) scaleX(0.45) scaleY(0.75); filter: blur(1.6px) hue-rotate(12deg); }
      15% { opacity: 0.6; transform: rotate(45deg) skewX(-7.5deg) scaleX(0.55) scaleY(0.85); filter: blur(1.5px) hue-rotate(15deg); }
      18% { opacity: 0.7; transform: rotate(45deg) skewX(-7deg) scaleX(0.65) scaleY(0.9); filter: blur(1.4px) hue-rotate(16deg); }
      22% { opacity: 0.75; transform: rotate(45deg) skewX(-6.5deg) scaleX(0.72) scaleY(0.95); filter: blur(1.3px) hue-rotate(17deg); }
      26% { opacity: 0.8; transform: rotate(45deg) skewX(-6deg) scaleX(0.78) scaleY(1); filter: blur(1.2px) hue-rotate(18deg); }
      30% { opacity: 0.85; transform: rotate(45deg) skewX(-5.5deg) scaleX(0.83) scaleY(1.05); filter: blur(1.1px) hue-rotate(19deg); }
      34% { opacity: 0.88; transform: rotate(45deg) skewX(-5deg) scaleX(0.87) scaleY(1.08); filter: blur(1.05px) hue-rotate(20deg); }
      38% { opacity: 0.9; transform: rotate(45deg) skewX(-4.5deg) scaleX(0.9) scaleY(1.1); filter: blur(1px) hue-rotate(20deg); }
      42% { opacity: 0.89; transform: rotate(45deg) skewX(-4deg) scaleX(0.93) scaleY(1.08); filter: blur(0.98px) hue-rotate(19deg); }
      46% { opacity: 0.87; transform: rotate(45deg) skewX(-3.5deg) scaleX(0.95) scaleY(1.05); filter: blur(0.96px) hue-rotate(18deg); }
      50% { opacity: 0.85; transform: rotate(45deg) skewX(-3deg) scaleX(0.97) scaleY(1.02); filter: blur(0.94px) hue-rotate(17deg); }
      54% { opacity: 0.82; transform: rotate(45deg) skewX(-2.5deg) scaleX(0.98) scaleY(1); filter: blur(0.92px) hue-rotate(16deg); }
      58% { opacity: 0.8; transform: rotate(45deg) skewX(-2deg) scaleX(0.99) scaleY(0.98); filter: blur(0.9px) hue-rotate(15deg); }
      62% { opacity: 0.75; transform: rotate(45deg) skewX(-1.5deg) scaleX(0.97) scaleY(0.95); filter: blur(0.95px) hue-rotate(14deg); }
      66% { opacity: 0.7; transform: rotate(45deg) skewX(-1deg) scaleX(0.95) scaleY(0.9); filter: blur(1px) hue-rotate(12deg); }
      70% { opacity: 0.65; transform: rotate(45deg) skewX(-0.5deg) scaleX(0.92) scaleY(0.85); filter: blur(1.05px) hue-rotate(10deg); }
      74% { opacity: 0.6; transform: rotate(45deg) skewX(0deg) scaleX(0.88) scaleY(0.8); filter: blur(1.1px) hue-rotate(8deg); }
      78% { opacity: 0.5; transform: rotate(45deg) skewX(0.5deg) scaleX(0.84) scaleY(0.75); filter: blur(1.2px) hue-rotate(6deg); }
      82% { opacity: 0.4; transform: rotate(45deg) skewX(1deg) scaleX(0.8) scaleY(0.7); filter: blur(1.3px) hue-rotate(5deg); }
      86% { opacity: 0.3; transform: rotate(45deg) skewX(1.5deg) scaleX(0.75) scaleY(0.6); filter: blur(1.4px) hue-rotate(3deg); }
      90% { opacity: 0.2; transform: rotate(45deg) skewX(2deg) scaleX(0.7) scaleY(0.5); filter: blur(1.5px) hue-rotate(2deg); }
      94% { opacity: 0.1; transform: rotate(45deg) skewX(2.5deg) scaleX(0.6) scaleY(0.4); filter: blur(1.7px) hue-rotate(1deg); }
      97% { opacity: 0.05; transform: rotate(45deg) skewX(3deg) scaleX(0.5) scaleY(0.35); filter: blur(1.8px) hue-rotate(0.5deg); }
      100% { opacity: 0; transform: rotate(45deg) skewX(3.5deg) scaleX(0.4) scaleY(0.3); filter: blur(2px) hue-rotate(0deg); }
    }

    /* Pantalla de viaje espacial */
    .viaje-espacial {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: 
        radial-gradient(ellipse at center, #001122 0%, #000611 40%, #000000 100%);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 2s ease-in-out;
      overflow: hidden;
    }

    .viaje-espacial.activo {
      opacity: 1;
      visibility: visible;
    }

    /* Campo de estrellas est√°ticas de fondo */
    .campo-estrellas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(1px 1px at 20% 30%, #fff, transparent),
        radial-gradient(1px 1px at 40% 70%, rgba(255,255,255,0.8), transparent),
        radial-gradient(0.5px 0.5px at 90% 40%, #fff, transparent),
        radial-gradient(1px 1px at 130% 80%, rgba(255,255,255,0.6), transparent),
        radial-gradient(0.5px 0.5px at 160% 30%, #ddd, transparent);
      background-repeat: repeat;
      background-size: 300px 200px;
      opacity: 0.3;
    }

    /* Estrellas que aparecen desde el centro y se mueven hacia atr√°s */
    .estrella-centro {
      position: absolute;
      background: #ffffff;
      border-radius: 50%;
      box-shadow: 0 0 4px rgba(255, 255, 255, 0.8);
      z-index: 10;
      opacity: 1;
    }

    /* Estrellas que se mueven como en No Man's Sky */
    .estrella-warp {
      position: absolute;
      background: #ffffff;
      border-radius: 50%;
      opacity: 0;
    }

    /* Animaci√≥n de estrella que se estira hacia los lados */
    @keyframes estrellaWarp {
      0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(1);
        border-radius: 50%;
        width: 2px;
        height: 2px;
      }
      5% {
        opacity: 1;
      }
      20% {
        transform: translate(-50%, -50%) scale(1.5);
        border-radius: 50%;
      }
      50% {
        transform: translate(-50%, -50%) scale(2);
        border-radius: 20% 50%;
        width: 8px;
        height: 2px;
      }
      80% {
        transform: translate(-50%, -50%) scale(4);
        border-radius: 10% 50%;
        width: 20px;
        height: 1px;
        opacity: 0.8;
      }
      100% {
        transform: translate(-50%, -50%) scale(8);
        border-radius: 5% 50%;
        width: 60px;
        height: 1px;
        opacity: 0;
      }
    }

    /* L√≠neas de velocidad para simular movimiento hacia adelante */
    .linea-velocidad {
      position: absolute;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent);
      height: 1px;
      opacity: 0;
      border-radius: 50px;
    }

    @keyframes lineaVelocidad {
      0% {
        opacity: 0;
        width: 0px;
        transform: translateX(0);
      }
      10% {
        opacity: 1;
        width: 10px;
      }
      50% {
        width: 100px;
        opacity: 1;
      }
      100% {
        width: 300px;
        opacity: 0;
        transform: translateX(200px);
      }
    }

    /* Part√≠culas espaciales simples */
    .particula-espacial {
      position: absolute;
      background: rgba(100, 200, 255, 0.6);
      border-radius: 50%;
      opacity: 0;
    }

    @keyframes particulaEspacial {
      0% {
        opacity: 0;
        transform: scale(0.5);
      }
      20% {
        opacity: 1;
      }
      80% {
        opacity: 1;
        transform: scale(1);
      }
      100% {
        opacity: 0;
        transform: scale(2);
      }
    }

    /* Efecto de t√∫nel sutil */
    .tunel-espacial {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 4px;
      height: 4px;
      border: 1px solid rgba(100, 200, 255, 0.2);
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }

    @keyframes tunelEspacial {
      0% {
        width: 4px;
        height: 4px;
        opacity: 0;
        border-width: 1px;
      }
      10% {
        opacity: 0.5;
      }
      100% {
        width: 400px;
        height: 400px;
        opacity: 0;
        border-width: 0px;
      }
    }

    /* Texto de transici√≥n mejorado */
    .texto-hiperespacio {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: rgba(100, 200, 255, 0.9);
      font-family: 'Cormorant Garamond', serif;
      font-size: 24px;
      font-weight: 300;
      text-align: center;
      opacity: 0;
      z-index: 1001;
      text-shadow: 0 0 10px rgba(100, 200, 255, 0.5);
      letter-spacing: 1px;
      animation: textoHiperespacio 4s ease-in-out;
    }

    @keyframes textoHiperespacio {
      0% { 
        opacity: 0; 
        transform: translate(-50%, -50%) scale(0.9); 
      }
      20% { 
        opacity: 1; 
        transform: translate(-50%, -50%) scale(1); 
      }
      80% { 
        opacity: 1; 
        transform: translate(-50%, -50%) scale(1); 
      }
      100% { 
        opacity: 0; 
        transform: translate(-50%, -50%) scale(1.1); 
      }
    }

    /* Animaci√≥n para flash especial */
    @keyframes flashEspecial {
      0% { opacity: 0; }
      50% { opacity: 1; }
      100% { opacity: 0; }
    }

    /* Variables din√°micas para animaciones */
    :root {
      --velocidad-dinamica: 1;
      --intensidad-audio: 0.5;
    }

    /* Ajustes din√°micos para efectos m√°s intensos */
    .estrella-hiper {
      animation: viajeHiperespacial calc(2s / var(--velocidad-dinamica)) ease-out forwards;
    }

    .linea-warp {
      animation: lineaWarp calc(1.5s / var(--velocidad-dinamica)) ease-out forwards;
      box-shadow: 0 0 calc(10px * var(--intensidad-audio)) rgba(100, 255, 218, var(--intensidad-audio));
    }

    .particula-cuantica {
      animation: particulaCuantica calc(3s / var(--velocidad-dinamica)) ease-out forwards;
    }

    .imagen-espacial {
      animation: imagenEspacial calc(5s / var(--velocidad-dinamica)) ease-out forwards;
    }

    .anillo-hiperespacio {
      animation: expandirAnillo calc(1.5s / var(--velocidad-dinamica)) ease-out infinite;
    }

    .onda-energia {
      animation: ondaEnergia calc(3s / var(--velocidad-dinamica)) ease-out infinite;
    }

    /* Efecto de distorsi√≥n espacial */
    .viaje-espacial.activo {
      animation: distorsionEspacial calc(10s / var(--velocidad-dinamica)) ease-in-out infinite;
    }

    @keyframes distorsionEspacial {
      0% { transform: scale(1) rotate(0deg); filter: hue-rotate(0deg); }
      25% { transform: scale(1.01) rotate(0.1deg); filter: hue-rotate(5deg); }
      50% { transform: scale(1.02) rotate(-0.1deg); filter: hue-rotate(10deg); }
      75% { transform: scale(1.01) rotate(0.05deg); filter: hue-rotate(5deg); }
      100% { transform: scale(1) rotate(0deg); filter: hue-rotate(0deg); }
    }
  </style>
</head>
<body>
  <!-- Bot√≥n de viaje espacial -->
  <button class="boton-viaje" onclick="iniciarViajeEspacial()">üöÄ Viaje Espacial</button>

  <!-- Sol central para el viaje espacial -->
  <div class="sol-central" id="solCentral"></div>

  <!-- Estrellas de fondo (FUERA del contenido original para evitar conflictos) -->
  <div class="estrella" style="top: 15%; left: 20%; width: 2px; height: 2px; animation-delay: 0s;"></div>
  <div class="estrella" style="top: 25%; left: 80%; width: 1px; height: 1px; animation-delay: 1s;"></div>
  <div class="estrella" style="top: 40%; left: 15%; width: 3px; height: 3px; animation-delay: 2s;"></div>
  <div class="estrella" style="top: 60%; right: 20%; width: 2px; height: 2px; animation-delay: 0.5s;"></div>
  <div class="estrella" style="top: 10%; left: 60%; width: 1px; height: 1px; animation-delay: 3s;"></div>

  <!-- Contenido original -->
  <div class="contenido-original" id="contenidoOriginal">
    <!-- Mensaje po√©tico en la parte superior -->
    <div class="mensaje">
      <div class="frase-principal">Te amar√© el doble por cada p√©talo que caiga,<br>porque en su descenso florece de nuevo mi amor por ti.</div>
      <div class="frase-secundaria">los p√©talos van a caer por siempre</div>
    </div>

  <!-- Base de madera -->
  <div class="base-madera" id="baseMadera"></div>
  
  <!-- Audio element for glass sound -->
  <audio id="glassSound" preload="auto">
    <source src="music/glass.mp3" type="audio/mpeg">
  </audio>
  
  <!-- Audio element for wood sound -->
  <audio id="woodSound" preload="auto">
    <source src="music/wood.mp3" type="audio/mpeg">
  </audio>
  
  <!-- C√∫pula unificada -->
  <div class="cupula" id="cupula">
    <!-- C√©sped en el fondo -->
    <div class="cesped"></div>
    
    <!-- Resplandor alrededor de la rosa -->
    <div class="resplandor"></div>
    
    <!-- Rosa con p√©talos correctamente posicionados -->
    <div class="rosa">
      <div class="tallo">
        <div class="espina"></div>
        <div class="espina"></div>
        <div class="espina"></div>
        <div class="hoja"></div>
      </div>
      
      <!-- Cabeza de la flor con p√©talos -->
      <div class="flor-cabeza">
        <!-- Capa exterior de p√©talos -->
        <div class="capa-exterior">
          <div class="petalo-rosa"></div>
          <div class="petalo-rosa"></div>
          <div class="petalo-rosa"></div>
          <div class="petalo-rosa"></div>
          <div class="petalo-rosa"></div>
          <div class="petalo-rosa"></div>
        </div>
        
        <!-- Capa interior de p√©talos -->
        <div class="capa-interior">
          <div class="petalo-rosa"></div>
          <div class="petalo-rosa"></div>
          <div class="petalo-rosa"></div>
          <div class="petalo-rosa"></div>
          <div class="petalo-rosa"></div>
        </div>
        
        <div class="centro-rosa"></div>
      </div>
    </div>

    <!-- Part√≠culas de luz -->
    <div class="particula" style="top: 35%; left: 20%; animation-delay: 0s;"></div>
    <div class="particula" style="top: 55%; right: 25%; animation-delay: 1s;"></div>
    <div class="particula" style="top: 75%; left: 30%; animation-delay: 2s;"></div>
    <div class="particula" style="top: 45%; left: 70%; animation-delay: 1.5s;"></div>
    
    <!-- Parte superior redonda (oculta) -->
    <div class="cupula-superior"></div>
    
    <!-- Parte inferior rectangular (oculta) -->
    <div class="cupula-inferior"></div>
  </div>
  </div> <!-- Cierre del contenido original -->

  <!-- Pantalla de viaje espacial -->
  <div class="viaje-espacial" id="viajeEspacial">
    <!-- Campo de estrellas de fondo -->
    <div class="campo-estrellas"></div>
    
    <!-- Texto de inicio -->
    <div class="texto-hiperespacio">Iniciando viaje gal√°ctico...</div>
    
    <!-- Contenedores para elementos din√°micos -->
    <div id="contenedorEstrellas"></div>
    <div id="contenedorLineas"></div>
    <div id="contenedorParticulas"></div>
    <div id="contenedorImagenes"></div>
  </div>

  <!-- Audio para el viaje -->
  <audio id="musicaViaje" preload="auto" loop>
    <source src="music/CornfieldChase.mp3" type="audio/mpeg">
  </audio>

  <script>
    // === SISTEMA DE VIAJE ESPACIAL ESTILO NO MAN'S SKY ===
    
    let viajeActivo = false;
    let intervalos = [];
    let audioElement = null;
    let velocidadBase = 1;
    let duracionCancion = 0;
    
    // Funci√≥n principal para iniciar el viaje espacial
    function calcularVelocidadDinamica() {
      if (!audioElement || !duracionCancion) return 1;
      
      const tiempoActual = audioElement.currentTime;
      const progreso = tiempoActual / duracionCancion;
      
      // Acelerar progresivamente
      const velocidad = 1 + (progreso * 3); // De 1x a 4x
      
      return Math.min(velocidad, 4);
    }
    
    // Funci√≥n principal para iniciar el viaje espacial
    async function iniciarViajeEspacial() {
      if (viajeActivo) return;
      
      viajeActivo = true;
      
      // Reproducir m√∫sica
      audioElement = document.getElementById('musicaViaje');
      audioElement.currentTime = 0;
      
      audioElement.addEventListener('loadedmetadata', () => {
        duracionCancion = audioElement.duration;
      });
      
      audioElement.play().catch(error => {
        console.log('No se pudo reproducir la m√∫sica:', error);
      });
      
      // Ocultar todo el contenido original sin afectar el layout
      const contenidoOriginal = document.getElementById('contenidoOriginal');
      contenidoOriginal.style.transition = 'opacity 2s ease-out, transform 2s ease-out';
      contenidoOriginal.style.opacity = '0';
      contenidoOriginal.style.transform = 'scale(0.8)';
      contenidoOriginal.style.visibility = 'hidden';
      contenidoOriginal.style.pointerEvents = 'none';
      
      // Mostrar el sol central
      const solCentral = document.getElementById('solCentral');
      solCentral.style.transition = 'opacity 1s ease-in';
      solCentral.style.opacity = '1';
      
      // Ocultar las estrellas de fondo (ahora est√°n fuera del contenedor)
      const estrellasDecorativas = document.querySelectorAll('.estrella');
      estrellasDecorativas.forEach(estrella => {
        estrella.style.transition = 'opacity 2s ease-out';
        estrella.style.opacity = '0';
        estrella.style.visibility = 'hidden';
      });
      
      // Mostrar pantalla de viaje despu√©s de 2 segundos
      setTimeout(() => {
        const viajeEspacial = document.getElementById('viajeEspacial');
        // Asegurar que la pantalla est√© visible y limpia
        viajeEspacial.style.display = 'block';
        viajeEspacial.style.opacity = '1';
        viajeEspacial.style.animation = '';
        viajeEspacial.style.transition = '';
        viajeEspacial.classList.add('activo');
        
        // Iniciar efectos del viaje
        setTimeout(iniciarEfectosEspaciales, 500);
        
        // Iniciar loop de actualizaci√≥n de velocidad
        iniciarLoopVelocidad();
      }, 2000);
    }
    
    // Loop principal que actualiza la velocidad
    function iniciarLoopVelocidad() {
      function actualizar() {
        if (!viajeActivo) return;
        
        velocidadBase = calcularVelocidadDinamica();
        requestAnimationFrame(actualizar);
      }
      
      actualizar();
    }
    
    // Funci√≥n para iniciar todos los efectos espaciales
    function iniciarEfectosEspaciales() {
      // Limpiar intervalos anteriores
      intervalos.forEach(clearInterval);
      intervalos = [];
      
      // Crear estrellas que aparecen desde el centro y se mueven hacia atr√°s
      intervalos.push(setInterval(() => {
        const velocidad = calcularVelocidadDinamica();
        const cantidad = Math.ceil(velocidad * 2); // M√°s estrellas con mayor velocidad
        
        for (let i = 0; i < cantidad; i++) {
          setTimeout(() => crearEstrellaCentro(), i * 30);
        }
      }, 100));
      
      // Crear estrellas que se estiran (efecto secundario)
      intervalos.push(setInterval(() => {
        const velocidad = calcularVelocidadDinamica();
        if (velocidad > 2) { // Solo cuando hay velocidad alta
          crearEstrellaWarp();
        }
      }, 300));
      
      // Crear l√≠neas de velocidad ocasionales
      intervalos.push(setInterval(() => {
        crearLineaVelocidad();
      }, 600));
      
      // Crear part√≠culas espaciales suaves
      intervalos.push(setInterval(() => {
        crearParticulaEspacial();
      }, 1200));
    }
    
    // Crear estrella que aparece aleatoriamente y se mueve hacia atr√°s
    function crearEstrellaCentro() {
      if (!viajeActivo) return;
      
      const velocidad = calcularVelocidadDinamica();
      const estrella = document.createElement('div');
      estrella.className = 'estrella-centro';
      
      // Posici√≥n inicial aleatoria en toda la pantalla
      const x = Math.random() * window.innerWidth;
      const y = Math.random() * window.innerHeight;
      
      // Direcci√≥n de movimiento hacia atr√°s (hacia el centro de la pantalla)
      const centerX = window.innerWidth / 2;
      const centerY = window.innerHeight / 2;
      
      // Calcular direcci√≥n desde la posici√≥n actual hacia el centro
      const dx = centerX - x;
      const dy = centerY - y;
      const distancia = Math.sqrt(dx * dx + dy * dy);
      
      // Normalizar la direcci√≥n y crear movimiento hacia atr√°s
      const direccionX = dx / distancia;
      const direccionY = dy / distancia;
      
      estrella.style.left = x + 'px';
      estrella.style.top = y + 'px';
      
      // Tama√±o inicial peque√±o
      const tamano = Math.random() * 2 + 1;
      estrella.style.width = tamano + 'px';
      estrella.style.height = tamano + 'px';
      estrella.style.background = '#fff';
      estrella.style.borderRadius = '50%';
      estrella.style.position = 'absolute';
      estrella.style.boxShadow = '0 0 4px rgba(255,255,255,0.8)';
      estrella.style.zIndex = '10';
      
      // Duraci√≥n basada en velocidad
      const duracion = Math.max(1, 3 / velocidad);
      
      // Posici√≥n final (m√°s hacia atr√°s en la direcci√≥n opuesta)
      const distanciaMovimiento = Math.max(window.innerWidth, window.innerHeight) * 0.8;
      const xFinal = x - (direccionX * distanciaMovimiento);
      const yFinal = y - (direccionY * distanciaMovimiento);
      
      estrella.style.transition = `all ${duracion}s linear`;
      
      document.getElementById('contenedorEstrellas').appendChild(estrella);
      
      // Animar hacia atr√°s
      setTimeout(() => {
        estrella.style.left = xFinal + 'px';
        estrella.style.top = yFinal + 'px';
        estrella.style.opacity = '0';
      }, 10);
      
      setTimeout(() => {
        if (estrella.parentNode) estrella.remove();
      }, duracion * 1000);
    }
    
    // Crear estrella que se estira (efecto para alta velocidad)
    function crearEstrellaWarp() {
      if (!viajeActivo) return;
      
      const velocidad = calcularVelocidadDinamica();
      const estrella = document.createElement('div');
      estrella.className = 'estrella-warp';
      
      // Posici√≥n aleatoria en la pantalla
      const x = Math.random() * window.innerWidth;
      const y = Math.random() * window.innerHeight;
      
      estrella.style.left = x + 'px';
      estrella.style.top = y + 'px';
      
      // Duraci√≥n inversamente proporcional a la velocidad
      const duracion = Math.max(0.8, 2.5 / velocidad);
      estrella.style.animationDuration = duracion + 's';
      
      document.getElementById('contenedorEstrellas').appendChild(estrella);
      
      setTimeout(() => {
        if (estrella.parentNode) estrella.remove();
      }, duracion * 1000);
    }
    
    // Crear l√≠neas de velocidad
    function crearLineaVelocidad() {
      if (!viajeActivo) return;
      
      const velocidad = calcularVelocidadDinamica();
      const linea = document.createElement('div');
      linea.className = 'linea-velocidad';
      
      const y = Math.random() * window.innerHeight;
      const x = Math.random() * (window.innerWidth * 0.3); // Solo en el lado izquierdo
      
      linea.style.left = x + 'px';
      linea.style.top = y + 'px';
      
      const duracion = Math.max(0.5, 1.5 / velocidad);
      linea.style.animationDuration = duracion + 's';
      
      document.getElementById('contenedorLineas').appendChild(linea);
      
      setTimeout(() => {
        if (linea.parentNode) linea.remove();
      }, duracion * 1000);
    }
    
    // Crear part√≠cula espacial suave
    function crearParticulaEspacial() {
      if (!viajeActivo) return;
      
      const velocidad = calcularVelocidadDinamica();
      const particula = document.createElement('div');
      particula.className = 'particula-espacial';
      
      const x = Math.random() * window.innerWidth;
      const y = Math.random() * window.innerHeight;
      
      particula.style.left = x + 'px';
      particula.style.top = y + 'px';
      particula.style.width = (Math.random() * 3 + 1) + 'px';
      particula.style.height = particula.style.width;
      
      const duracion = Math.max(1, 3 / velocidad);
      particula.style.animationDuration = duracion + 's';
      
      document.getElementById('contenedorParticulas').appendChild(particula);
      
      setTimeout(() => {
        if (particula.parentNode) particula.remove();
      }, duracion * 1000);
    }
    
    // Crear t√∫nel espacial ocasional
    function crearTunelEspacial() {
      if (!viajeActivo) return;
      
      const velocidad = calcularVelocidadDinamica();
      const tunel = document.createElement('div');
      tunel.className = 'tunel-espacial-temp'; // A√±adir clase para identificar
      tunel.style.position = 'absolute';
      tunel.style.top = '50%';
      tunel.style.left = '50%';
      tunel.style.width = '4px';
      tunel.style.height = '4px';
      tunel.style.border = '1px solid rgba(100, 200, 255, 0.3)';
      tunel.style.borderRadius = '50%';
      tunel.style.transform = 'translate(-50%, -50%)';
      tunel.style.pointerEvents = 'none'; // Asegurar que no interfiera
      
      const duracion = Math.max(2, 5 / velocidad);
      tunel.style.animation = `tunelEspacial ${duracion}s ease-out forwards`;
      
      document.getElementById('viajeEspacial').appendChild(tunel);
      
      setTimeout(() => {
        if (tunel.parentNode) tunel.remove();
      }, duracion * 1000);
    }
    
    // Funci√≥n para detener el viaje espacial
    function detenerViajeEspacial() {
      if (!viajeActivo) return;
      
      viajeActivo = false;
      velocidadBase = 1;
      
      // Detener m√∫sica
      if (audioElement) {
        audioElement.pause();
        audioElement.currentTime = 0;
      }
      
      // Limpiar intervalos
      intervalos.forEach(clearInterval);
      intervalos = [];
      
      // Ocultar pantalla de viaje inmediatamente
      const viajeEspacial = document.getElementById('viajeEspacial');
      viajeEspacial.classList.remove('activo');
      viajeEspacial.style.opacity = '0';
      viajeEspacial.style.display = 'none';
      
      // Limpiar contenedores completamente
      document.getElementById('contenedorEstrellas').innerHTML = '';
      document.getElementById('contenedorLineas').innerHTML = '';
      document.getElementById('contenedorParticulas').innerHTML = '';
      
      // Ocultar el sol central
      const solCentral = document.getElementById('solCentral');
      solCentral.style.transition = 'opacity 0.5s ease-out';
      solCentral.style.opacity = '0';
      
      // Limpiar estrellas fugaces existentes
      const estrellasFugaces = document.querySelectorAll('.estrella-fugaz');
      estrellasFugaces.forEach(estrella => estrella.remove());
      
      // Limpiar elementos del t√∫nel espacial y otros elementos temporales
      const elementosTunel = viajeEspacial.querySelectorAll('.tunel-espacial-temp');
      elementosTunel.forEach(elemento => elemento.remove());
      
      // Limpiar cualquier otro elemento adicional que pueda quedar
      const elementosAdicionales = viajeEspacial.querySelectorAll('div:not([id]):not(.contenedor-efectos)');
      elementosAdicionales.forEach(elemento => elemento.remove());
      
      // Restaurar contenido original inmediatamente a estado original
      const contenidoOriginal = document.getElementById('contenidoOriginal');
      contenidoOriginal.style.transition = 'none'; // Sin transici√≥n para restauraci√≥n inmediata
      contenidoOriginal.style.visibility = '';
      contenidoOriginal.style.opacity = '';
      contenidoOriginal.style.transform = '';
      contenidoOriginal.style.pointerEvents = '';
      
      // Restaurar estrellas de fondo inmediatamente a estado original
      const estrellasDecorativas = document.querySelectorAll('.estrella');
      estrellasDecorativas.forEach(estrella => {
        estrella.style.visibility = '';
        estrella.style.opacity = '';
        estrella.style.transition = '';
      });
      
      // Restaurar transici√≥n del contenido despu√©s
      setTimeout(() => {
        contenidoOriginal.style.transition = '';
      }, 100);
    }
    
    // === INICIALIZACI√ìN ===
    document.addEventListener('DOMContentLoaded', function() {
      // Configurar bot√≥n de viaje espacial
      const botonViaje = document.getElementById('botonViajeEspacial');
      if (botonViaje) {
        botonViaje.addEventListener('click', iniciarViajeEspacial);
      }
      
      // Configurar tecla ESC para detener viaje
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && viajeActivo) {
          detenerViajeEspacial();
        }
      });
      
      // Configurar clic en pantalla para detener viaje
      document.getElementById('viajeEspacial').addEventListener('click', detenerViajeEspacial);
    });
    
    // === FIN DE FUNCIONES DEL VIAJE ESPACIAL ===
    
    // === FUNCIONES ORIGINALES ===
    
    // Funci√≥n para reproducir el sonido del cristal
    function reproducirSonidoCristal() {
      const glassSound = document.getElementById('glassSound');
      glassSound.currentTime = 0; // Reiniciar el audio desde el principio
      glassSound.play().catch(error => {
        console.log('No se pudo reproducir el audio:', error);
      });
    }

    // Funci√≥n para reproducir el sonido de madera
    function reproducirSonidoMadera() {
      const woodSound = document.getElementById('woodSound');
      woodSound.currentTime = 0; // Reiniciar el audio desde el principio
      woodSound.play().catch(error => {
        console.log('No se pudo reproducir el audio de madera:', error);
      });
    }

    // Agregar event listener para el click en la c√∫pula
    document.getElementById('cupula').addEventListener('click', reproducirSonidoCristal);

    // Agregar event listener para el click en la base de madera
    document.getElementById('baseMadera').addEventListener('click', reproducirSonidoMadera);

    // Generar p√©talos cayendo que salen directamente de la rosa
    function crearPetalo() {
      const petalo = document.createElement("div");
      petalo.classList.add("petalo-caido");
      
      // Posici√≥n exacta del centro de la flor (donde est√°n los p√©talos)
      const florCabeza = document.querySelector('.flor-cabeza');
      if (florCabeza) {
        const rect = florCabeza.getBoundingClientRect();
        const cupulaRect = document.getElementById("cupula").getBoundingClientRect();
        
        // Calcular posici√≥n relativa a la c√∫pula
        const centroX = rect.left + rect.width/2 - cupulaRect.left;
        const centroY = rect.top + rect.height/2 - cupulaRect.top;
        
        // Peque√±a variaci√≥n aleatoria para naturalidad
        const variacionX = (Math.random() - 0.5) * 15; // ¬±7.5px de variaci√≥n
        const variacionY = (Math.random() - 0.5) * 8;  // ¬±4px de variaci√≥n
        
        petalo.style.left = (centroX + variacionX) + "px";
        petalo.style.top = (centroY + variacionY) + "px";
      } else {
        // Fallback a posici√≥n fija si no se encuentra la flor
        petalo.style.left = "125px";
        petalo.style.top = "140px";
      }
      
      // Duraci√≥n variable para naturalidad
      petalo.style.animationDuration = (6 + Math.random() * 3) + "s";
      
      // Tama√±o ligeramente variable
      const escala = 0.8 + Math.random() * 0.3;
      petalo.style.transform = `scale(${escala})`;
      
      // Retraso aleatorio
      petalo.style.animationDelay = Math.random() * 1 + "s";
      
      document.getElementById("cupula").appendChild(petalo);

      // Limpiar despu√©s de la animaci√≥n
      setTimeout(() => { 
        if (petalo.parentNode) {
          petalo.remove(); 
        }
      }, 10000);
    }

    // Crear p√©talos con intervalos m√°s espaciados
    function iniciarPetalos() {
      crearPetalo();
      setTimeout(iniciarPetalos, 2000 + Math.random() * 2000); // Entre 2-4 segundos
    }

    // Iniciar despu√©s de un peque√±o retraso
    setTimeout(iniciarPetalos, 1000);

    // Agregar part√≠culas de luz ocasionales
    function crearParticula() {
      const particula = document.createElement("div");
      particula.classList.add("particula");
      particula.style.top = (20 + Math.random() * 50) + "%";
      particula.style.left = (20 + Math.random() * 60) + "%";
      particula.style.animationDelay = Math.random() * 3 + "s";
      
      document.querySelector('.cupula-inferior').appendChild(particula);

      setTimeout(() => { 
        if (particula.parentNode) {
          particula.remove(); 
        }
      }, 8000);
    }

    setInterval(crearParticula, 4000);

    // Generar estrellas fugaces ocasionales
    function crearEstrellaFugaz() {
      // No crear estrellas fugaces durante el viaje espacial
      if (viajeActivo) return;
      
      const estrella = document.createElement("div");
      estrella.classList.add("estrella-fugaz");
      
      // Posici√≥n aleatoria en la parte superior de la pantalla
      const inicioX = Math.random() * window.innerWidth;
      const inicioY = -10; // Empezar un poco arriba de la pantalla
      
      estrella.style.left = inicioX + "px";
      estrella.style.top = inicioY + "px";
      
      // Duraci√≥n variable para naturalidad
      const duracion = 2 + Math.random() * 2; // Entre 2-4 segundos
      estrella.style.animationDuration = duracion + "s";
      
      // Tama√±o ligeramente variable
      const tamano = 1 + Math.random() * 2; // Entre 1-3px
      estrella.style.width = tamano + "px";
      estrella.style.height = tamano + "px";
      
      document.body.appendChild(estrella);

      // Limpiar despu√©s de la animaci√≥n
      setTimeout(() => { 
        if (estrella.parentNode) {
          estrella.remove(); 
        }
      }, duracion * 1000 + 500);
    }

    // Crear estrellas fugaces con frecuencia moderada y ocasionalmente m√∫ltiples
    function programarEstrellaFugaz() {
      // No crear estrellas fugaces durante el viaje espacial
      if (viajeActivo) {
        const proximaEstrella = 1000; // Revisar cada segundo si ya termin√≥ el viaje
        setTimeout(programarEstrellaFugaz, proximaEstrella);
        return;
      }
      
      // Decidir si crear una o m√∫ltiples estrellas (20% de probabilidad de m√∫ltiples)
      const crearMultiples = Math.random() < 0.2;
      
      if (crearMultiples) {
        // Crear entre 2-3 estrellas con peque√±os intervalos
        const numEstrellas = 2 + Math.floor(Math.random() * 2);
        for (let i = 0; i < numEstrellas; i++) {
          setTimeout(() => {
            if (!viajeActivo) { // Verificar otra vez antes de crear
              crearEstrellaFugaz();
            }
          }, i * (300 + Math.random() * 400)); // Entre 300-700ms de diferencia
        }
      } else {
        // Crear una sola estrella
        if (!viajeActivo) {
          crearEstrellaFugaz();
        }
      }
      
      const proximaEstrella = 5000 + Math.random() * 6000; // Entre 5-11 segundos
      setTimeout(programarEstrellaFugaz, proximaEstrella);
    }

    // Iniciar estrellas fugaces despu√©s de 3 segundos
    setTimeout(programarEstrellaFugaz, 3000);
  </script>
</body>
</html>